package com.xwc.open.easy.example;import com.xwc.open.easy.example.dao.UserLogicMapper;import com.xwc.open.easy.example.entity.UserLogic;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import java.util.ArrayList;/** * 创建人：徐卫超 * 时间：2019/10/14 16:02 * 功能：测试逻辑CRUD功能 * 备注： @Loglic注解是用于逻辑删除的注解 */@RunWith(SpringRunner.class)@SpringBootTest(classes = Application.class)public class TestLogic {    @Autowired    private UserLogicMapper userLogicMapper;    /**     * 描述: 在执行插入方法时 框架会自动把逻辑删除属性置为有效值     */    @Test    public void insert(){        UserLogic userLogic = new UserLogic();        userLogicMapper.insert(userLogic);        /**         *  ==>  Preparing: INSERT INTO t_user ( id, name, valid) VALUES ( ?, ?, ?)         *  ==> Parameters: b02a3e2ad40846f4b4d0711324676ae8(String), null, 0(Integer)         *  <==    Updates: 1         */        ArrayList<UserLogic> list = new ArrayList<>();        UserLogic item1 = new UserLogic();        list.add(item1);        UserLogic item2 = new UserLogic();        list.add(item2);        userLogicMapper.insertBatch(list);        /**         *  ==>  Preparing: INSERT INTO t_user ( id, name, valid) VALUES ( ?, ?, ?) , ( ?, ?, ?)         *  ==> Parameters: 9fcf42ca4fc64e4283ec3c4833d7cfd2(String), null, 0(Integer), 46914683829d46ca8236572cb6df6e54(String), null, 0(Integer)         *  <==    Updates: 2         */    }    /**     * 在查询、更新、删除操作时框架自动帮我们添加逻辑字段的过滤条件     */    @Test    public void selectAndUpdateAndDelte(){        UserLogic user = new UserLogic();        userLogicMapper.insert(user);        UserLogic dbUser = userLogicMapper.selectKey(user.getId()); //查询操作        /**         *  ==>  Preparing: INSERT INTO t_user ( id, name, valid) VALUES ( ?, ?, ?)         *  ==> Parameters: 4283b1d0cc2544459e7fc58b7ecbfe59(String), null, 0(Integer)         *  <==    Updates: 1         */        dbUser.setName("逻辑删除更新测试");        userLogicMapper.update(dbUser); //更新操作        /**         *  ==>  Preparing: UPDATE t_user SET id=?, name=? WHERE id = ? AND valid = 0         *  ==> Parameters: 4283b1d0cc2544459e7fc58b7ecbfe59(String), 逻辑删除更新测试(String), 4283b1d0cc2544459e7fc58b7ecbfe59(String)         *  <==    Updates: 1         */        userLogicMapper.delete(dbUser.getId());  //删除操作        /**         *  ==>  Preparing: UPDATE t_user SET valid=1 WHERE id = ? AND valid = 0         *  ==> Parameters: 4283b1d0cc2544459e7fc58b7ecbfe59(String)         *  <==    Updates: 1         */    }}